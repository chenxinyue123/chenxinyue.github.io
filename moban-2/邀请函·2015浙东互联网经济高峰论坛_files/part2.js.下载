/*!
 * pickadate.js v3.3.0, 2013/10/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
(function(factory){if(typeof define==="function"&&define.amd){define("picker",["jquery"],factory)}else{this.Picker=factory(jQuery)}}(function($){var $document=$(document);function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){if(!ELEMENT){return PickerConstructor}var STATE={id:Math.abs(~~(Math.random()*1000000000))},SETTINGS=COMPONENT?$.extend(true,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){if(STATE&&STATE.start){return P}STATE.methods={};STATE.start=true;STATE.open=false;STATE.type=ELEMENT.type;ELEMENT.autofocus=ELEMENT==document.activeElement;ELEMENT.type="text";ELEMENT.readOnly=true;P.component=new COMPONENT(P,SETTINGS);P.$root=$(PickerConstructor._.node("div",createWrappedComponent(),CLASSES.picker)).on({focusin:function(event){P.$root.removeClass(CLASSES.focused);event.stopPropagation()},"mousedown click":function(event){if(event.target!=P.$root.children()[0]){event.stopPropagation()}}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=document.activeElement;activeElement=activeElement&&(activeElement.type||activeElement.href);if(targetDisabled||!$.contains(P.$root[0],activeElement)){ELEMENT.focus()}if(targetData.nav&&!targetDisabled){P.set("highlight",P.component.item.highlight,{nav:targetData.nav})}else{if(PickerConstructor._.isInteger(targetData.pick)&&!targetDisabled){P.set("select",targetData.pick).close(true);data_set_value=targetData.pick}else{if(targetData.clear){P.set("select",data_set_value).close(true)}}}});if(SETTINGS.formatSubmit){P._hidden=$("<input "+"type=hidden "+'name="'+(typeof SETTINGS.hiddenPrefix=="string"?SETTINGS.hiddenPrefix:"")+ELEMENT.name+(typeof SETTINGS.hiddenSuffix=="string"?SETTINGS.hiddenSuffix:"_submit")+'"'+($ELEMENT.data("value")?' value="'+PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.formatSubmit,P.component.item.select])+'"':"")+">")[0]}$ELEMENT.addClass(CLASSES.input).on("focus.P"+STATE.id+" click.P"+STATE.id,focusToOpen).on("change.P"+STATE.id,function(){if(P._hidden){P._hidden.value=ELEMENT.value?PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.formatSubmit,P.component.item.select]):""}}).on("keydown.P"+STATE.id,function(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode);if(keycode==27){P.close();return false}if(keycode==32||isKeycodeDelete||!STATE.open&&P.component.key[keycode]){event.preventDefault();event.stopPropagation();if(isKeycodeDelete){P.clear().close()}else{P.open()}}}).val($ELEMENT.data("value")?PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.format,P.component.item.select]):ELEMENT.value).after(P._hidden).data(NAME,P);if(SETTINGS.container){$(SETTINGS.container).append(P.$root)}else{$ELEMENT.after(P.$root)}P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet});if(ELEMENT.autofocus){P.open()}return P.trigger("start").trigger("render")},render:function(entireComponent){if(entireComponent){P.$root.html(createWrappedComponent())}else{P.$root.find("."+CLASSES.box).html(P.component.nodes(STATE.open))}return P.trigger("render")},stop:function(){if(!STATE.start){return P}P.close();if(P._hidden){P._hidden.parentNode.removeChild(P._hidden)}P.$root.remove();$ELEMENT.removeClass(CLASSES.input).off(".P"+STATE.id).removeData(NAME);ELEMENT.type=STATE.type;ELEMENT.readOnly=false;P.trigger("stop");STATE.methods={};STATE.start=false;return P},open:function(dontGiveFocus){if(STATE.open){return P}$ELEMENT.addClass(CLASSES.active);P.$root.addClass(CLASSES.opened);if(dontGiveFocus!==false){STATE.open=true;$ELEMENT.trigger("focus");$document.on("click.P"+STATE.id+" focusin.P"+STATE.id,function(event){if(event.target!=ELEMENT&&event.target!=document){P.close()}}).on("keydown.P"+STATE.id,function(event){var keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target;if(keycode==27){P.close(true)}else{if(target==ELEMENT&&(keycodeToMove||keycode==13)){event.preventDefault();if(keycodeToMove){PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)])}else{if(!P.$root.find("."+CLASSES.highlighted).hasClass(CLASSES.disabled)){P.set("select",P.component.item.highlight).close()}}}else{if($.contains(P.$root[0],target)&&keycode==13){event.preventDefault();target.click()
}}}})}return P.trigger("open")},close:function(giveFocus){if(giveFocus){$ELEMENT.off("focus.P"+STATE.id).trigger("focus");setTimeout(function(){$ELEMENT.on("focus.P"+STATE.id,focusToOpen)},0)}$ELEMENT.removeClass(CLASSES.active);P.$root.removeClass(CLASSES.opened+" "+CLASSES.focused);if(STATE.open){STATE.open=false;$document.off(".P"+STATE.id)}return P.trigger("close")},clear:function(){return P.set("clear")},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=PickerConstructor._.isObject(thing),thingObject=thingIsObject?thing:{};if(thing){if(!thingIsObject){thingObject[thing]=value}for(thingItem in thingObject){thingValue=thingObject[thingItem];if(P.component.item[thingItem]){P.component.set(thingItem,thingValue,options||{})}if(thingItem=="select"||thingItem=="clear"){$ELEMENT.val(thingItem=="clear"?"":PickerConstructor._.trigger(P.component.formats.toString,P.component,[SETTINGS.format,P.component.get(thingItem)])).trigger("change")}}P.render()}return P.trigger("set",thingObject)},get:function(thing,format){thing=thing||"value";if(STATE[thing]!=null){return STATE[thing]}if(thing=="value"){return ELEMENT.value}if(P.component.item[thing]){if(typeof format=="string"){return PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,P.component.get(thing)])}return P.component.get(thing)}},on:function(thing,method){var thingName,thingMethod,thingIsObject=PickerConstructor._.isObject(thing),thingObject=thingIsObject?thing:{};if(thing){if(!thingIsObject){thingObject[thing]=method}for(thingName in thingObject){thingMethod=thingObject[thingName];STATE.methods[thingName]=STATE.methods[thingName]||[];STATE.methods[thingName].push(thingMethod)}}return P},trigger:function(name,data){var methodList=STATE.methods[name];if(methodList){methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])})}switch(name){case"open":if(typeof clearPageChange==="function"){clearPageChange()}break;case"close":if(typeof backPageChange==="function"){setTimeout(backPageChange,300)}break;case"set":if(typeof backPageChange==="function"){setTimeout(backPageChange,300)}break}return P}};function createWrappedComponent(){return PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder)}function focusToOpen(event){event.stopPropagation();if(event.type=="focus"){P.$root.addClass(CLASSES.focused)}P.open()}return new PickerInstance()}PickerConstructor.klasses=function(prefix){prefix=prefix||"picker";return{picker:prefix,opened:prefix+"--opened",focused:prefix+"--focused",input:prefix+"__input",active:prefix+"__input--active",holder:prefix+"__holder",frame:prefix+"__frame",wrap:prefix+"__wrap",box:prefix+"__box"}};PickerConstructor._={group:function(groupObject){var loopObjectScope,nodesList="",counter=PickerConstructor._.trigger(groupObject.min,groupObject);for(;counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i){loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter]);nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2])}return nodesList},node:function(wrapper,item,klass,attribute){if(!item){return""}item=$.isArray(item)?item.join(""):item;klass=klass?' class="'+klass+'"':"";attribute=attribute?" "+attribute:"";return"<"+wrapper+klass+attribute+">"+item+"</"+wrapper+">"},lead:function(number){return(number<10?"0":"")+number},trigger:function(callback,scope,args){return typeof callback=="function"?callback.apply(scope,args||[]):callback},digits:function(string){return(/\d/).test(string[1])?2:1},isObject:function(value){return{}.toString.call(value).indexOf("Object")>-1},isDate:function(value){return{}.toString.call(value).indexOf("Date")>-1&&this.isInteger(value.getDate())},isInteger:function(value){return{}.toString.call(value).indexOf("Number")>-1&&value%1===0}};PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name);if(options=="picker"){return componentData}if(componentData&&typeof options=="string"){PickerConstructor._.trigger(componentData[options],componentData,[action]);return this}return this.each(function(){var $this=$(this);if(!$this.data(name)){new PickerConstructor(this,name,Component,options)}})};$.fn[name].defaults=Component.defaults};return PickerConstructor}));var data_set_value;function clearPageChange(e){$(".m-page").off("mousedown touchstart");$(".m-page").off("mousemove touchmove");$(".m-page").off("mouseup touchend mouseout")}function backPageChange(e){DNmove=true;$(".m-page").on("mousedown touchstart",page_touchstart);$(".m-page").on("mousemove touchmove",page_touchmove);$(".m-page").on("mouseup touchend mouseout",page_touchend);DNmove=false}
/*!
 * Date picker for pickadate.js v3.3.0
 * http://amsul.github.io/pickadate.js/date.htm
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["picker","jquery"],factory)
}else{factory(Picker,jQuery)}}(function(Picker,$){var DAYS_IN_WEEK=7,WEEKS_IN_CALENDAR=6;function DatePicker(picker,settings){var calendar=this,elementValue=picker.$node[0].value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return getComputedStyle(picker.$root[0]).direction==="rtl"};calendar.settings=settings;calendar.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"navigate create validate",view:"create validate viewset",disable:"flipItem",enable:"flipItem"};calendar.item={};calendar.item.disable=(settings.disable||[]).slice(0);calendar.item.enable=-(function(collectionDisabled){return collectionDisabled[0]===true?collectionDisabled.shift():-1})(calendar.item.disable);calendar.set("min",settings.min).set("max",settings.max).set("now").set("select",valueString||calendar.item.now,{format:formatString,data:(function(formatArray){return valueString&&(formatArray.indexOf("mm")>-1||formatArray.indexOf("m")>-1)})(calendar.formats.toArray(formatString))});calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){calendar.set("highlight",[calendar.item.highlight.year,calendar.item.highlight.month,calendar.item.highlight.date+timeChange],{interval:timeChange});this.render()}};picker.on("render",function(){picker.$root.find("."+settings.klass.selectMonth).on("change",function(){picker.set("highlight",[picker.get("view").year,this.value,picker.get("highlight").date]);picker.$root.find("."+settings.klass.selectMonth).trigger("focus")});picker.$root.find("."+settings.klass.selectYear).on("change",function(){picker.set("highlight",[this.value,picker.get("view").month,picker.get("highlight").date]);picker.$root.find("."+settings.klass.selectYear).trigger("focus")})}).on("open",function(){picker.$root.find("button, select").attr("disabled",false)}).on("close",function(){picker.$root.find("button, select").attr("disabled",true)})}DatePicker.prototype.set=function(type,value,options){var calendar=this;calendar.item[(type=="enable"?"disable":type=="flip"?"enable":type)]=calendar.queue[type].split(" ").map(function(method){return value=calendar[method](type,value,options)}).pop();if(type=="select"){calendar.set("highlight",calendar.item.select,options)}else{if(type=="highlight"){calendar.set("view",calendar.item.highlight,options)}else{if((type=="flip"||type=="min"||type=="max"||type=="disable"||type=="enable")&&calendar.item.select&&calendar.item.highlight){calendar.set("select",calendar.item.select,options).set("highlight",calendar.item.highlight,options)}}}return calendar};DatePicker.prototype.get=function(type){return this.item[type]};DatePicker.prototype.create=function(type,value,options){var isInfiniteValue,calendar=this;value=value===undefined?type:value;if(value==-Infinity||value==Infinity){isInfiniteValue=value}else{if(Picker._.isObject(value)&&Picker._.isInteger(value.pick)){value=value.obj}else{if($.isArray(value)){value=new Date(value[0],value[1],value[2]);value=Picker._.isDate(value)?value:calendar.create().obj}else{if(Picker._.isInteger(value)||Picker._.isDate(value)){value=calendar.normalize(new Date(value),options)}else{value=calendar.now(type,value,options)}}}}return{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}};DatePicker.prototype.now=function(type,value,options){value=new Date();if(options&&options.rel){value.setDate(value.getDate()+options.rel)}return this.normalize(value,options)};DatePicker.prototype.navigate=function(type,value,options){if(Picker._.isObject(value)){var targetDateObject=new Date(value.year,value.month+(options&&options.nav?options.nav:0),1),year=targetDateObject.getFullYear(),month=targetDateObject.getMonth(),date=value.date;while(Picker._.isDate(targetDateObject)&&new Date(year,month,date).getMonth()!==month){date-=1}value=[year,month,date]}return value};DatePicker.prototype.normalize=function(value){value.setHours(0,0,0,0);return value};DatePicker.prototype.measure=function(type,value){var calendar=this;if(!value){value=type=="min"?-Infinity:Infinity}else{if(Picker._.isInteger(value)){value=calendar.now(type,value,{rel:value})}}return value};DatePicker.prototype.viewset=function(type,dateObject){return this.create([dateObject.year,dateObject.month,1])};DatePicker.prototype.validate=function(type,dateObject,options){var calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isInverted=calendar.item.enable===-1,hasEnabledBeforeTarget,hasEnabledAfterTarget,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,reachedMin,reachedMax,hasEnabledWeekdays=isInverted&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick;
if(dateTime<dateObject.pick){hasEnabledBeforeTarget=true}else{if(dateTime>dateObject.pick){hasEnabledAfterTarget=true}}}return Picker._.isInteger(value)}).length;if(!options.nav){if((!isInverted&&calendar.disabled(dateObject))||(isInverted&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget))||(dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick)){if(isInverted&&!hasEnabledWeekdays&&((!hasEnabledAfterTarget&&interval>0)||(!hasEnabledBeforeTarget&&interval<0))){interval*=-1}while(calendar.disabled(dateObject)){if(Math.abs(interval)>1&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)){dateObject=originalDateObject;interval=Math.abs(interval)/interval}if(dateObject.pick<=minLimitObject.pick){reachedMin=true;interval=1}else{if(dateObject.pick>=maxLimitObject.pick){reachedMax=true;interval=-1}}if(reachedMin&&reachedMax){break}dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval])}}}return dateObject};DatePicker.prototype.disabled=function(dateObject){var calendar=this,isDisabledDate=!!calendar.item.disable.filter(function(dateToDisable){if(Picker._.isInteger(dateToDisable)){return dateObject.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7}if($.isArray(dateToDisable)||Picker._.isDate(dateToDisable)){return dateObject.pick===calendar.create(dateToDisable).pick}}).length;return calendar.item.enable===-1?!isDisabledDate:isDisabledDate||dateObject.pick<calendar.item.min.pick||dateObject.pick>calendar.item.max.pick};DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={};if(!value||Picker._.isInteger(value)||$.isArray(value)||Picker._.isDate(value)||Picker._.isObject(value)&&Picker._.isInteger(value.pick)){return value}if(!(options&&options.format)){throw"Need a formatting option to parse this.."}calendar.formats.toArray(options.format).map(function(label){var formattingLabel=calendar.formats[label],formatLength=formattingLabel?Picker._.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,"").length;if(formattingLabel){parsingObject[label]=value.substr(0,formatLength)}value=value.substr(formatLength)});return[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-(options.data?1:0),parsingObject.dd||parsingObject.d]};DatePicker.prototype.formats=(function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/\w+/)[0];if(!dateObject.mm&&!dateObject.m){dateObject.m=collection.indexOf(word)}return word.length}function getFirstWordLength(string){return string.match(/\w+/)[0].length}return{d:function(string,dateObject){return string?Picker._.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:Picker._.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?Picker._.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:Picker._.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(""+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this;return calendar.formats.toArray(formatString).map(function(label){return Picker._.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,"")}).join("")}}})();DatePicker.prototype.flipItem=function(type,value){var calendar=this,collection=calendar.item.disable,isInverted=calendar.item.enable===-1;if(value=="flip"){calendar.item.enable=isInverted?1:-1}else{if((type=="enable"&&value===true)||(type=="disable"&&value===false)){calendar.item.enable=1;collection=[]}else{if((type=="enable"&&value===false)||(type=="disable"&&value===true)){calendar.item.enable=-1;collection=[]}else{if($.isArray(value)){if(!isInverted&&type=="enable"||isInverted&&type=="disable"){collection=calendar.removeDisabled(collection,value)}else{if(!isInverted&&type=="disable"||isInverted&&type=="enable"){collection=calendar.addDisabled(collection,value)}}}}}}return collection};DatePicker.prototype.addDisabled=function(collection,item){var calendar=this;item.map(function(timeUnit){if(!calendar.filterDisabled(collection,timeUnit).length){collection.push(timeUnit)}});return collection};DatePicker.prototype.removeDisabled=function(collection,item){var calendar=this;
item.map(function(timeUnit){collection=calendar.filterDisabled(collection,timeUnit,1)});return collection};DatePicker.prototype.filterDisabled=function(collection,timeUnit,isRemoving){var calendar=this,timeIsObject=$.isArray(timeUnit)||Picker._.isDate(timeUnit),timeObjectValue=timeIsObject&&calendar.create(timeUnit).pick;return collection.filter(function(disabledTimeUnit){var isMatch=timeIsObject&&($.isArray(disabledTimeUnit)||Picker._.isDate(disabledTimeUnit))?timeObjectValue===calendar.create(disabledTimeUnit).pick:timeUnit===disabledTimeUnit;return isRemoving?!isMatch:isMatch})};DatePicker.prototype.nodes=function(isOpen){var calendar=this,settings=calendar.settings,nowObject=calendar.item.now,selectedObject=calendar.item.select,highlightedObject=calendar.item.highlight,viewsetObject=calendar.item.view,disabledCollection=calendar.item.disable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,tableHead=(function(collection){if(settings.firstDay){collection.push(collection.shift())}return Picker._.node("thead",Picker._.group({min:0,max:DAYS_IN_WEEK-1,i:1,node:"th",item:function(counter){return[collection[counter],settings.klass.weekdays]}}))})((settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysShort).slice(0)),createMonthNav=function(next){return Picker._.node("div"," ",settings.klass["nav"+(next?"Next":"Prev")]+((next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month)||(!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month)?" "+settings.klass.navDisabled:""),"data-nav="+(next||-1))},createMonthLabel=function(monthsCollection){if(settings.selectMonths){return Picker._.node("select",Picker._.group({min:0,max:11,i:1,node:"option",item:function(loopedMonth){return[monthsCollection[loopedMonth],0,"value="+loopedMonth+(viewsetObject.month==loopedMonth?" selected":"")+(((viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month)||(viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month))?" disabled":"")]}}),settings.klass.selectMonth,isOpen?"":"disabled")}return Picker._.node("div",monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(){var focusedYear=viewsetObject.year,numberYears=settings.selectYears===true?5:~~(settings.selectYears/2);if(numberYears){var minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears;if(minYear>lowestYear){highestYear+=minYear-lowestYear;lowestYear=minYear}if(maxYear<highestYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear;lowestYear-=availableYears>neededYears?neededYears:availableYears;highestYear=maxYear}return Picker._.node("select",Picker._.group({min:lowestYear,max:highestYear,i:1,node:"option",item:function(loopedYear){return[loopedYear,0,"value="+loopedYear+(focusedYear==loopedYear?" selected":"")]}}),settings.klass.selectYear,isOpen?"":"disabled")}return Picker._.node("div",focusedYear,settings.klass.year)};return Picker._.node("div",createMonthNav()+createMonthNav(1)+createMonthLabel(settings.showMonthsShort?settings.monthsShort:settings.monthsFull)+createYearLabel(),settings.klass.header)+Picker._.node("table",tableHead+Picker._.node("tbody",Picker._.group({min:0,max:WEEKS_IN_CALENDAR-1,i:1,node:"tr",item:function(rowCounter){var shiftDateBy=settings.firstDay&&calendar.create([viewsetObject.year,viewsetObject.month,1]).day===0?-7:0;return[Picker._.group({min:DAYS_IN_WEEK*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+DAYS_IN_WEEK-1},i:1,node:"td",item:function(targetDate){targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)]);return[Picker._.node("div",targetDate.date,(function(klasses){klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus);if(nowObject.pick==targetDate.pick){klasses.push(settings.klass.now)}if(selectedObject&&selectedObject.pick==targetDate.pick){klasses.push(settings.klass.selected)}if(highlightedObject&&highlightedObject.pick==targetDate.pick){klasses.push(settings.klass.highlighted)}if(disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick){klasses.push(settings.klass.disabled)}return klasses.join(" ")})([settings.klass.day]),"data-pick="+targetDate.pick)]}})]}})),settings.klass.table)+Picker._.node("div",Picker._.node("button",settings.today,settings.klass.buttonToday,"type=button data-pick="+nowObject.pick+(isOpen?"":" disabled"))+Picker._.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")),settings.klass.footer)};DatePicker.defaults=(function(prefix){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"OK",format:"d mmmm, yyyy",klass:{table:prefix+"table",header:prefix+"header",navPrev:prefix+"nav--prev",navNext:prefix+"nav--next",navDisabled:prefix+"nav--disabled",month:prefix+"month",year:prefix+"year",selectMonth:prefix+"select--month",selectYear:prefix+"select--year",weekdays:prefix+"weekday",day:prefix+"day",disabled:prefix+"day--disabled",selected:prefix+"day--selected",highlighted:prefix+"day--highlighted",now:prefix+"day--today",infocus:prefix+"day--infocus",outfocus:prefix+"day--outfocus",footer:prefix+"footer",buttonClear:prefix+"button--clear",buttonToday:prefix+"button--today"}}
})(Picker.klasses().picker+"__");Picker.extend("pickadate",DatePicker)}));
/*!
 * Time picker for pickadate.js v3.3.0
 * http://amsul.github.io/pickadate.js/time.htm
 */
(function(factory){if(typeof define==="function"&&define.amd){define(["picker","jquery"],factory)}else{factory(Picker,jQuery)}}(function(Picker,$){var HOURS_IN_DAY=24,MINUTES_IN_HOUR=60,HOURS_TO_NOON=12,MINUTES_IN_DAY=HOURS_IN_DAY*MINUTES_IN_HOUR;function TimePicker(picker,settings){var clock=this,elementDataValue=picker.$node.data("value");clock.settings=settings;clock.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"create validate",view:"create validate",disable:"flipItem",enable:"flipItem"};clock.item={};clock.item.interval=settings.interval||30;clock.item.disable=(settings.disable||[]).slice(0);clock.item.enable=-(function(collectionDisabled){return collectionDisabled[0]===true?collectionDisabled.shift():-1})(clock.item.disable);clock.set("min",settings.min).set("max",settings.max).set("now").set("select",elementDataValue||picker.$node[0].value||clock.item.min,{format:elementDataValue?settings.formatSubmit:settings.format});clock.key={40:1,38:-1,39:1,37:-1,go:function(timeChange){clock.set("highlight",clock.item.highlight.pick+timeChange*clock.item.interval,{interval:timeChange*clock.item.interval});this.render()}};picker.on("render",function(){var $pickerHolder=picker.$root.children(),$viewset=$pickerHolder.find("."+settings.klass.viewset);if($viewset.length){$pickerHolder[0].scrollTop+=$viewset.position().top-($viewset[0].clientHeight*2)}}).on("open",function(){picker.$root.find("button").attr("disable",false)}).on("close",function(){picker.$root.find("button").attr("disable",true)})}TimePicker.prototype.set=function(type,value,options){var clock=this;clock.item[(type=="enable"?"disable":type=="flip"?"enable":type)]=clock.queue[type].split(" ").map(function(method){return value=clock[method](type,value,options)}).pop();if(type=="select"){clock.set("highlight",clock.item.select,options)}else{if(type=="highlight"){clock.set("view",clock.item.highlight,options)}else{if(type=="interval"){clock.set("min",clock.item.min,options).set("max",clock.item.max,options)}else{if((type=="flip"||type=="min"||type=="max"||type=="disable"||type=="enable")&&clock.item.select&&clock.item.highlight){if(type=="min"){clock.set("max",clock.item.max,options)}clock.set("select",clock.item.select,options).set("highlight",clock.item.highlight,options)}}}}return clock};TimePicker.prototype.get=function(type){return this.item[type]};TimePicker.prototype.create=function(type,value,options){var clock=this;value=value===undefined?type:value;if(Picker._.isObject(value)&&Picker._.isInteger(value.pick)){value=value.pick}else{if($.isArray(value)){value=+value[0]*MINUTES_IN_HOUR+(+value[1])}else{if(!Picker._.isInteger(value)){value=clock.now(type,value,options)}}}if(type=="max"&&value<clock.item.min.pick){value+=MINUTES_IN_DAY}value=clock.normalize(type,value,options);return{hour:~~(HOURS_IN_DAY+value/MINUTES_IN_HOUR)%HOURS_IN_DAY,mins:(MINUTES_IN_HOUR+value%MINUTES_IN_HOUR)%MINUTES_IN_HOUR,time:(MINUTES_IN_DAY+value)%MINUTES_IN_DAY,pick:value}};TimePicker.prototype.now=function(type,value){var date=new Date(),dateMinutes=date.getHours()*MINUTES_IN_HOUR+date.getMinutes();if(Picker._.isInteger(value)){value+=type=="min"&&value<0&&dateMinutes===0?2:1}else{value=1}return value*this.item.interval+dateMinutes};TimePicker.prototype.normalize=function(type,value){var minObject=this.item.min,interval=this.item.interval,difference=type=="min"&&!minObject?0:(value-minObject.pick)%interval;return value-(difference+(value<0?interval:0))};TimePicker.prototype.measure=function(type,value,options){var clock=this;if(!value){value=type=="min"?[0,0]:[HOURS_IN_DAY-1,MINUTES_IN_HOUR-1]}else{if(value===true||Picker._.isInteger(value)){value=clock.now(type,value,options)}else{if(Picker._.isObject(value)&&Picker._.isInteger(value.pick)){value=clock.normalize(type,value.pick,options)}}}return value};TimePicker.prototype.validate=function(type,timeObject,options){var clock=this,interval=options&&options.interval?options.interval:clock.item.interval;if(clock.disabled(timeObject)){timeObject=clock.shift(timeObject,interval)}timeObject=clock.scope(timeObject);if(clock.disabled(timeObject)){timeObject=clock.shift(timeObject,interval*-1)}return timeObject};TimePicker.prototype.disabled=function(timeObject){var clock=this,isDisabledTime=clock.item.disable.filter(function(timeToDisable){if(Picker._.isInteger(timeToDisable)){return timeObject.hour==timeToDisable}if($.isArray(timeToDisable)){return timeObject.pick==clock.create(timeToDisable).pick}}).length;return clock.item.enable===-1?!isDisabledTime:isDisabledTime};TimePicker.prototype.shift=function(timeObject,interval){var clock=this,minLimit=clock.item.min.pick,maxLimit=clock.item.max.pick;interval=interval||clock.item.interval;while(clock.disabled(timeObject)){timeObject=clock.create(timeObject.pick+=interval);
if(timeObject.pick<=minLimit||timeObject.pick>=maxLimit){break}}return timeObject};TimePicker.prototype.scope=function(timeObject){var minLimit=this.item.min.pick,maxLimit=this.item.max.pick;return this.create(timeObject.pick>maxLimit?maxLimit:timeObject.pick<minLimit?minLimit:timeObject)};TimePicker.prototype.parse=function(type,value,options){var clock=this,parsingObject={};if(!value||Picker._.isInteger(value)||$.isArray(value)||Picker._.isDate(value)||Picker._.isObject(value)&&Picker._.isInteger(value.pick)){return value}if(!(options&&options.format)){throw"Need a formatting option to parse this.."}clock.formats.toArray(options.format).map(function(label){var formattingLabel=clock.formats[label],formatLength=formattingLabel?Picker._.trigger(formattingLabel,clock,[value,parsingObject]):label.replace(/^!/,"").length;if(formattingLabel){parsingObject[label]=value.substr(0,formatLength)}value=value.substr(formatLength)});return +parsingObject.i+MINUTES_IN_HOUR*(+(parsingObject.H||parsingObject.HH)||(+(parsingObject.h||parsingObject.hh)%12+(/^p/i.test(parsingObject.A||parsingObject.a)?12:0)))};TimePicker.prototype.formats={h:function(string,timeObject){return string?Picker._.digits(string):timeObject.hour%HOURS_TO_NOON||HOURS_TO_NOON},hh:function(string,timeObject){return string?2:Picker._.lead(timeObject.hour%HOURS_TO_NOON||HOURS_TO_NOON)},H:function(string,timeObject){return string?Picker._.digits(string):""+(timeObject.hour%24)},HH:function(string,timeObject){return string?Picker._.digits(string):Picker._.lead(timeObject.hour%24)},i:function(string,timeObject){return string?2:Picker._.lead(timeObject.mins)},a:function(string,timeObject){return string?4:MINUTES_IN_DAY/2>timeObject.time%MINUTES_IN_DAY?"a.m.":"p.m."},A:function(string,timeObject){return string?2:MINUTES_IN_DAY/2>timeObject.time%MINUTES_IN_DAY?"AM":"PM"},toArray:function(formatString){return formatString.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(formatString,itemObject){var clock=this;return clock.formats.toArray(formatString).map(function(label){return Picker._.trigger(clock.formats[label],clock,[0,itemObject])||label.replace(/^!/,"")}).join("")}};TimePicker.prototype.flipItem=function(type,value){var clock=this,collection=clock.item.disable,isFlipped=clock.item.enable===-1;if(value=="flip"){clock.item.enable=isFlipped?1:-1}else{if((type=="enable"&&value===true)||(type=="disable"&&value===false)){clock.item.enable=1;collection=[]}else{if((type=="enable"&&value===false)||(type=="disable"&&value===true)){clock.item.enable=-1;collection=[]}else{if($.isArray(value)){if(!isFlipped&&type=="enable"||isFlipped&&type=="disable"){collection=clock.removeDisabled(collection,value)}else{if(!isFlipped&&type=="disable"||isFlipped&&type=="enable"){collection=clock.addDisabled(collection,value)}}}}}}return collection};TimePicker.prototype.addDisabled=function(collection,item){var clock=this;if(item===false){collection=[]}else{item.map(function(timeUnit){if(!clock.filterDisabled(collection,timeUnit).length){collection.push(timeUnit)}})}return collection};TimePicker.prototype.removeDisabled=function(collection,item){var clock=this;item.map(function(timeUnit){collection=clock.filterDisabled(collection,timeUnit,1)});return collection};TimePicker.prototype.filterDisabled=function(collection,timeUnit,isRemoving){var timeIsArray=$.isArray(timeUnit);return collection.filter(function(disabledTimeUnit){var isMatch=!timeIsArray&&timeUnit===disabledTimeUnit||timeIsArray&&$.isArray(disabledTimeUnit)&&timeUnit.toString()===disabledTimeUnit.toString();return isRemoving?!isMatch:isMatch})};TimePicker.prototype.i=function(type,value){return Picker._.isInteger(value)&&value>0?value:this.item.interval};TimePicker.prototype.nodes=function(isOpen){var clock=this,settings=clock.settings,selectedObject=clock.item.select,highlightedObject=clock.item.highlight,viewsetObject=clock.item.view,disabledCollection=clock.item.disable;return Picker._.node("ul",Picker._.group({min:clock.item.min.pick,max:clock.item.max.pick,i:clock.item.interval,node:"li",item:function(loopedTime){loopedTime=clock.create(loopedTime);return[Picker._.trigger(clock.formats.toString,clock,[Picker._.trigger(settings.formatLabel,clock,[loopedTime])||settings.format,loopedTime]),(function(klasses,timeMinutes){if(selectedObject&&selectedObject.pick==timeMinutes){klasses.push(settings.klass.selected)}if(highlightedObject&&highlightedObject.pick==timeMinutes){klasses.push(settings.klass.highlighted)}if(viewsetObject&&viewsetObject.pick==timeMinutes){klasses.push(settings.klass.viewset)}if(disabledCollection&&clock.disabled(loopedTime)){klasses.push(settings.klass.disabled)}return klasses.join(" ")})([settings.klass.listItem],loopedTime.pick),"data-pick="+loopedTime.pick]}})+Picker._.node("li",Picker._.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disable"))),settings.klass.list)};TimePicker.defaults=(function(prefix){return{clear:"OK",format:"h:i A",interval:30,klass:{picker:prefix+" "+prefix+"--time",holder:prefix+"__holder",list:prefix+"__list",listItem:prefix+"__list-item",disabled:prefix+"__list-item--disabled",selected:prefix+"__list-item--selected",highlighted:prefix+"__list-item--highlighted",viewset:prefix+"__list-item--viewset",now:prefix+"__list-item--now",buttonClear:prefix+"__button--clear"}}
})(Picker.klasses().picker);Picker.extend("pickatime",TimePicker)}));function popErr(text){var $popup_error=$(".u-note.error");$popup_error.html(text).addClass("on");setTimeout(function(){$popup_error.html(text).removeClass("on")},2000)}function popSuccess(text){var $popup_sucess=$(".u-note.sucess");$popup_sucess.html(text).addClass("on");setTimeout(function(){$popup_sucess.html(text).removeClass("on")},3000)}$(".m-contactFormLayer .btn-submit").click(function(){var $form=$("form#formContact");var $name=$form.find('input[name="name"]');var name=$name.val();if($.trim(name).length==0){popErr("请输入姓名");return}var $tel=$form.find('input[name="tel"]');var tel=$tel.val();if($.trim(tel).length==0){popErr("请输入手机");return}if(isNaN(tel)||tel.length<8||tel.length>18){popErr("请输入正确的手机");return}var time1="";var $time1=$form.find('input[name="time1"]');time1=$time1.val();if($time1.length>0&&$time1.parents("dl").attr("isMust")=="true"){if($.trim(time1).length==0){popErr("请输入"+$time1.parents("dl").find("dt").html().replace(":",""));return}}var text1="";var $text1=$form.find('input[name="text1"]');text1=$text1.val();if($text1.length>0&&$text1.parents("dl").attr("isMust")=="true"){if($.trim(text1).length==0){popErr("请输入"+$text1.parents("dl").find("dt").html().replace(":",""));return}}var text2="";var $text2=$form.find('input[name="text2"]');text2=$text2.val();if($text2.length>0&&$text2.parents("dl").attr("isMust")=="true"){if($.trim(text2).length==0){popErr("请输入"+$text2.parents("dl").find("dt").html().replace(":",""));return}}var text3="";var $text3=$form.find('input[name="text3"]');text3=$text3.val();if($text3.length>0&&$text3.parents("dl").attr("isMust")=="true"){if($.trim(text3).length==0){popErr("请输入"+$text3.parents("dl").find("dt").html().replace(":",""));return}}var text4="";var $text4=$form.find('input[name="text4"]');text4=$text4.val();if($text4.length>0&&$text4.parents("dl").attr("isMust")=="true"){if($.trim(text4).length==0){popErr("请输入"+$text4.parents("dl").find("dt").html().replace(":",""));return}}var select1="";var $select1=$form.find('select[name="select1"]');select1=$select1.val();if($select1.length>0&&$select1.parents("dl").attr("isMust")=="true"){if($.trim(select1).length==0||$.trim(select1)=="请选择"){popErr("请输入"+$select1.parents("dl").find("dt").html().replace(":",""));return}}var select2="";var $select2=$form.find('select[name="select2"]');select2=$select2.val();if($select2.length>0&&$select2.parents("dl").attr("isMust")=="true"){if($.trim(select2).length==0||$.trim(select1)=="请选择"){popErr("请输入"+$select2.parents("dl").find("dt").html().replace(":",""));return}}var $self=$(this);$self.prop("disabled",true);$self.val("正在提交...");$.ajax({url:"/mobile/action",dataType:"json",type:"post",data:{action:"addBook",activityId:window.app.activityId,name:name,tel:tel,sex:2,time1:time1,select1:select1,select2:select2,text1:text1,text2:text2,text3:text3,text4:text4},success:function(res){}});setTimeout(function(){popSuccess("提交成功");$self.prop("disabled",false);$self.val("立即提交");$("form#formContact")[0].reset()},600)});(function($,undefined){var prefix="",eventPrefix,endEventName,endAnimationName,vendors={Webkit:"webkit",Moz:"",O:"o"},document=window.document,testEl=document.createElement("div"),supportedTransforms=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,transform,transitionProperty,transitionDuration,transitionTiming,transitionDelay,animationName,animationDuration,animationTiming,animationDelay,cssReset={};function dasherize(str){return str.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function normalizeEvent(name){return eventPrefix?eventPrefix+name:name.toLowerCase()}$.each(vendors,function(vendor,event){if(testEl.style[vendor+"TransitionProperty"]!==undefined){prefix="-"+vendor.toLowerCase()+"-";eventPrefix=event;return false}});transform=prefix+"transform";cssReset[transitionProperty=prefix+"transition-property"]=cssReset[transitionDuration=prefix+"transition-duration"]=cssReset[transitionDelay=prefix+"transition-delay"]=cssReset[transitionTiming=prefix+"transition-timing-function"]=cssReset[animationName=prefix+"animation-name"]=cssReset[animationDuration=prefix+"animation-duration"]=cssReset[animationDelay=prefix+"animation-delay"]=cssReset[animationTiming=prefix+"animation-timing-function"]="";$.fx={off:(eventPrefix===undefined&&testEl.style.transitionProperty===undefined),speeds:{_default:400,fast:200,slow:600},cssPrefix:prefix,transitionEnd:normalizeEvent("TransitionEnd"),animationEnd:normalizeEvent("AnimationEnd")};$.fn.animate=function(properties,duration,ease,callback,delay){if($.isFunction(duration)){callback=duration,ease=undefined,duration=undefined}if($.isFunction(ease)){callback=ease,ease=undefined}if($.isPlainObject(duration)){ease=duration.easing,callback=duration.complete,delay=duration.delay,duration=duration.duration}if(duration){duration=(typeof duration=="number"?duration:($.fx.speeds[duration]||$.fx.speeds._default))/1000}if(delay){delay=parseFloat(delay)/1000
}return this.anim(properties,duration,ease,callback,delay)};$.fn.anim=function(properties,duration,ease,callback,delay){var key,cssValues={},cssProperties,transforms="",that=this,wrappedCallback,endEvent=$.fx.transitionEnd,fired=false;if(duration===undefined){duration=$.fx.speeds._default/1000}if(delay===undefined){delay=0}if($.fx.off){duration=0}if(typeof properties=="string"){cssValues[animationName]=properties;cssValues[animationDuration]=duration+"s";cssValues[animationDelay]=delay+"s";cssValues[animationTiming]=(ease||"linear");endEvent=$.fx.animationEnd}else{cssProperties=[];for(key in properties){if(supportedTransforms.test(key)){transforms+=key+"("+properties[key]+") "}else{cssValues[key]=properties[key],cssProperties.push(dasherize(key))}}if(transforms){cssValues[transform]=transforms,cssProperties.push(transform)}if(duration>0&&typeof properties==="object"){cssValues[transitionProperty]=cssProperties.join(", ");cssValues[transitionDuration]=duration+"s";cssValues[transitionDelay]=delay+"s";cssValues[transitionTiming]=(ease||"linear")}}wrappedCallback=function(event){if(typeof event!=="undefined"){if(event.target!==event.currentTarget){return}$(event.target).unbind(endEvent,wrappedCallback)}else{$(this).unbind(endEvent,wrappedCallback)}fired=true;$(this).css(cssReset);callback&&callback.call(this)};if(duration>0){this.bind(endEvent,wrappedCallback);setTimeout(function(){if(fired){return}wrappedCallback.call(that)},(duration*1000)+25)}this.size()&&this.get(0).clientLeft;this.css(cssValues);if(duration<=0){setTimeout(function(){that.each(function(){wrappedCallback.call(this)})},0)}return this};testEl=null})($);var loading={autoInterval:null,show:function(){var $umask=$(".u-mask");var $ualert=$(".u-alert");$(".u-alert").animate({opacity:1},400)},hide:function(){setTimeout(function(){var $umask=$(".u-mask");var $ualert=$(".u-alert");$ualert.animate({opacity:0},400);$umask.find(">span").animate({opacity:0},400);setTimeout(function(){$umask.animate({opacity:0},400)},600);setTimeout(function(){$umask.hide();$ualert.hide();if(page.isAutoPlay&&!loading.autoInterval){	loading.autoInterval=setInterval(page.autoScroll,(page.autoPlayTime+0.5)*1000);}},1000)},300)}};var __onAction=function(e){if($(e.currentTarget).attr("data-event")!="no"){e.preventDefault()}e.stopPropagation();var cur=$(e.currentTarget);var action=cur.attr("data-action")||"";var pattern=/^([a-zA-Z0-9_]+):\/\/([a-zA-Z0-9_]+)$/;var result=pattern.exec(action);var _class=null;var _method=null;var _opts={node:cur,e_node:e,_node:e.currentTarget};if(result){_class=result[1];_method=result[2];if((_class in $)&&(_method in $[_class])){$[_class][_method].call(null,_opts)}}};var global={_click:("ontouchstart" in window)?"tap":"click",_events:{},_windowHeight:$(window).height(),_windowWidth:$(window).width(),_rotateNode:$(".p-ct"),_isMotion:!!window.DeviceMotionEvent,_elementStyle:document.createElement("div").style,_UC:RegExp("Android").test(navigator.userAgent)&&RegExp("UC").test(navigator.userAgent)?true:false,_weixin:RegExp("MicroMessenger").test(navigator.userAgent)?true:false,_iPhoen:RegExp("iPhone").test(navigator.userAgent)||RegExp("iPod").test(navigator.userAgent)||RegExp("iPad").test(navigator.userAgent)?true:false,_Android:RegExp("Android").test(navigator.userAgent)?true:false,_IsPC:function(){var userAgentInfo=navigator.userAgent;var Agents=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod");var flag=true;for(var v=0;v<Agents.length;v++){if(userAgentInfo.indexOf(Agents[v])>0){flag=false;break}}return flag},_isOwnEmpty:function(obj){for(var name in obj){if(obj.hasOwnProperty(name)){return false}}return true},_vendor:function(){var vendors=["t","webkitT","MozT","msT","OT"],transform,i=0,l=vendors.length;for(;i<l;i++){transform=vendors[i]+"ransform";if(transform in this._elementStyle){return vendors[i].substr(0,vendors[i].length-1)}}return false},_prefixStyle:function(style){if(this._vendor()===false){return false}if(this._vendor()===""){return style}return this._vendor()+style.charAt(0).toUpperCase()+style.substr(1)},_hasPerspective:function(){var ret=this._prefixStyle("perspective") in this._elementStyle;if(ret&&"webkitPerspective" in this._elementStyle){this._injectStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(node,rule){ret=node.offsetLeft===9&&node.offsetHeight===3})}return !!ret},_injectStyles:function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body"),mod="modernizr";if(parseInt(nodes,10)){while(nodes--){node=document.createElement("div");node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node)}}style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join("");div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background="";fakeBody.style.overflow="hidden";docOverflow=docElement.style.overflow;docElement.style.overflow="hidden";docElement.appendChild(fakeBody)}ret=callback(div,rule);if(!body){fakeBody.parentNode.removeChild(fakeBody);
docElement.style.overflow=docOverflow}else{div.parentNode.removeChild(div)}return !!ret},_translateZ:function(){if(this._hasPerspective){return" translateZ(0)"}else{return""}},_handleEvent:function(type){if(!this._events[type]){return}var i=0,l=this._events[type].length;if(!l){return}for(;i<l;i++){this._events[type][i].apply(this,[].slice.call(arguments,1))}},_on:function(type,fn){if(!this._events[type]){this._events[type]=[]}this._events[type].push(fn)},execHandler:function(handler){if(handler&&handler instanceof Object){var callback=handler.callback||null;var opts=handler.opts||[];var context=handler.context||null;var delay=handler.delay||-1;if(callback&&callback instanceof Function){if(typeof(delay)=="number"&&delay>=0){setTimeout(function(){callback.call(context,opts)},delay)}else{callback.call(context,opts)}}}},execAfterMergerHandler:function(handler,_opts){if(handler&&handler instanceof Object){var opts=handler.opts||[];handler.opts=$.extend(handler.opts,_opts)}this.execHandler(handler)},_scrollStop:function(){$("body").addClass("f-ofh");$(window).on("touchmove.scroll",this._scrollControl);$(window).on("scroll.scroll",this._scrollControl)},_scrollStart:function(){$("body").removeClass("f-ofh");$(window).off("touchmove.scroll");$(window).off("scroll.scroll")},_scrollControl:function(e){e.preventDefault();return false},setActionHook:function(){$("body").on(__global._click,"[data-action]",__onAction)},injectAction:function(action){$.extend($.Action,action)},loadingPageShow:function(node){if(node.length>=1){node.show()}},loadingPageHide:function(node){if(node.length>=1){node.hide()}},refresh:function(){this._windowHeight=$(window).height();this._windowWidth=$(window).width()}};